"use strict";(self.webpackChunktemp=self.webpackChunktemp||[]).push([[1543],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=s(n),k=r,u=m["".concat(p,".").concat(k)]||m[k]||d[k]||l;return n?a.createElement(u,o(o({ref:t},c),{},{components:n})):a.createElement(u,o({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1007:(e,t,n)=>{n.d(t,{Z:()=>k});var a=n(7294),r=n(6010);const l="browserWindow_my1Q",o="browserWindowHeader_jXSR",i="buttons_uHc7",p="browserWindowAddressBar_Pd8y",s="dot_giz1",c="browserWindowMenuIcon_Vhuh",d="bar_rrRL",m="browserWindowBody_Idgs";function k(e){let{children:t,minHeight:n,url:k="http://localhost:3000"}=e;return a.createElement("div",{className:l,style:{minHeight:n}},a.createElement("div",{className:o},a.createElement("div",{className:i},a.createElement("span",{className:s,style:{background:"#f25f58"}}),a.createElement("span",{className:s,style:{background:"#fbbe3c"}}),a.createElement("span",{className:s,style:{background:"#58cb42"}})),a.createElement("div",{className:(0,r.Z)(p,"text--truncate")},k),a.createElement("div",{className:c},a.createElement("div",null,a.createElement("span",{className:d}),a.createElement("span",{className:d}),a.createElement("span",{className:d})))),a.createElement("div",{className:m},t))}},2232:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294);const r="codeDescription_fg9D",l="codeDescriptionBody_Gp1s";function o(e){let{children:t,minHeight:n}=e;return a.createElement("div",{className:r,style:{minHeight:n}},a.createElement("div",{className:l},t))}},3691:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);function r(e){let{children:t,color:n}=e;return a.createElement("span",{style:{backgroundColor:n,borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)}},3603:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>p,metadata:()=>c,toc:()=>m});var a=n(7462),r=(n(7294),n(3905)),l=n(2232),o=n(1007),i=n(3691);const p={sidebar_position:5,description:"\ud83d\udccc Docker \uc704\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uc900\ube44\ub85c\uc368 `Dockerfile` \uc744 \uc791\uc131\ud569\ub2c8\ub2e4."},s="5) Data Generator on Docker",c={unversionedId:"database/data-generator-docker",id:"database/data-generator-docker",title:"5) Data Generator on Docker",description:"\ud83d\udccc Docker \uc704\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uc900\ube44\ub85c\uc368 `Dockerfile` \uc744 \uc791\uc131\ud569\ub2c8\ub2e4.",source:"@site/docs/database/data-generator-docker.mdx",sourceDirName:"database",slug:"/database/data-generator-docker",permalink:"/tutorial/docs/database/data-generator-docker",draft:!1,editUrl:"https://github.com/mlops-for-mle/tutorial/tree/main/docs/database/data-generator-docker.mdx",tags:[],version:"current",lastUpdatedBy:"Jongseob Jeon",lastUpdatedAt:1670983417,formattedLastUpdatedAt:"Dec 14, 2022",sidebarPosition:5,frontMatter:{sidebar_position:5,description:"\ud83d\udccc Docker \uc704\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uc900\ube44\ub85c\uc368 `Dockerfile` \uc744 \uc791\uc131\ud569\ub2c8\ub2e4."},sidebar:"tutorialSidebar",previous:{title:"4) Data Insertion Loop",permalink:"/tutorial/docs/database/data-insertion-loop"},next:{title:"6) Data Generator on Docker Compose",permalink:"/tutorial/docs/database/data-generator-docker-compose"}},d={},m=[{value:"\ubaa9\ud45c",id:"\ubaa9\ud45c",level:3},{value:"\uc2a4\ud399 \uba85\uc138\uc11c",id:"\uc2a4\ud399-\uba85\uc138\uc11c",level:3},{value:"1. Data Generator",id:"1-data-generator",level:2},{value:"1.1 <code>data_generator.py</code>",id:"11-data_generatorpy",level:3},{value:"1.2 Dockerfile \uc791\uc131",id:"12-dockerfile-\uc791\uc131",level:3},{value:"1.2.1 Dockerfile",id:"121-dockerfile",level:4},{value:"1.2.2 Build",id:"122-build",level:4},{value:"1.2.3 Run",id:"123-run",level:4},{value:"2. Docker Network",id:"2-docker-network",level:2},{value:"2.1 Localhost",id:"21-localhost",level:3},{value:"2.2 Connect Network",id:"22-connect-network",level:3},{value:"2.3 Data \ud655\uc778",id:"23-data-\ud655\uc778",level:3},{value:"3. \ud55c\uacc4",id:"3-\ud55c\uacc4",level:2}],k={toc:m};function u(e){let{components:t,...p}=e;return(0,r.kt)("wrapper",(0,a.Z)({},k,p,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"5-data-generator-on-docker"},"5) Data Generator on Docker"),(0,r.kt)("h3",{id:"\ubaa9\ud45c"},"\ubaa9\ud45c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Docker \uc704\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uc900\ube44\ub85c\uc368 ",(0,r.kt)("inlineCode",{parentName:"li"},"Dockerfile")," \uc744 \uc791\uc131\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"DB \uc548\uc5d0 \ub370\uc774\ud130\uac00 \uacc4\uc18d\ud574\uc11c \uc0bd\uc785\ub418\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"\uc2a4\ud399 \uba85\uc138\uc11c"),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("h3",{id:"\uc2a4\ud399-\uba85\uc138\uc11c"},"\uc2a4\ud399 \uba85\uc138\uc11c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)(i.Z,{color:"#6A77D7",mdxType:"Highlight"},"4) Data Insertion Loop ")," \ucc55\ud130\uc5d0\uc11c \uc791\uc131\ud55c script \ub97c build \ud560 \uc218 \uc788\ub294 `Dockerfile` \uc744 \uc791\uc131\ud569\ub2c8\ub2e4. - Base image \ub294 `amd64/python:3.9-slim` \uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4. - Container \uc5d0\uc11c psql \uc744 \uc774\uc6a9\ud558\uc5ec DB \uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d `postgresql-client` \ub97c \uc124\uce58\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"psql")," \uc744 \uc774\uc6a9\ud558\uc5ec DB \uc5d0 \ub370\uc774\ud130\uac00 \uacc4\uc18d\ud574\uc11c \uc313\uc774\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Local \uc5d0\uc11c \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"Data generator server \uc5d0\uc11c \ud655\uc778\ud569\ub2c8\ub2e4.")))))),(0,r.kt)("hr",null),(0,r.kt)(o.Z,{url:"https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch1",mdxType:"BrowserWindow"},(0,r.kt)("p",null,"\ud574\ub2f9 \ud30c\ud2b8\uc758 \uc804\uccb4 \ucf54\ub4dc\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mlops-for-mle/mlops-for-mle/tree/main/ch1"},"mlops-for-mle/ch1/")," \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"ch1\n// highlight-next-line\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 create_table.py\n// highlight-next-line\n\u251c\u2500\u2500 data_generator.py\n\u251c\u2500\u2500 docker-compose.yaml\n\u251c\u2500\u2500 insert_data.py\n\u2514\u2500\u2500 insert_data_loop.py\n"))),(0,r.kt)("h2",{id:"1-data-generator"},"1. Data Generator"),(0,r.kt)("h3",{id:"11-data_generatorpy"},"1.1 ",(0,r.kt)("inlineCode",{parentName:"h3"},"data_generator.py")),(0,r.kt)(i.Z,{color:"#6A77D7",mdxType:"Highlight"},"4) Data Insertion Loop ")," \ucc55\ud130\uc5d0\uc11c \uc791\uc131\ud55c \ucf54\ub4dc\ub4e4\uc744 \ubaa8\uc544\uc11c \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud558\ub294 `data_generator.py` \ub97c \uc791\uc131\ud569\ub2c8\ub2e4.",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="data_generator.py"',title:'"data_generator.py"'},'# data_generator.py\nimport time\nfrom argparse import ArgumentParser\n\nimport pandas as pd\nimport psycopg2\nfrom sklearn.datasets import load_iris\n\n\ndef get_data():\n    X, y = load_iris(return_X_y=True, as_frame=True)\n    df = pd.concat([X, y], axis="columns")\n    rename_rule = {\n        "sepal length (cm)": "sepal_length",\n        "sepal width (cm)": "sepal_width",\n        "petal length (cm)": "petal_length",\n        "petal width (cm)": "petal_width",\n    }\n    df = df.rename(columns=rename_rule)\n    return df\n\n\ndef create_table(db_connect):\n    create_table_query = """\n    CREATE TABLE IF NOT EXISTS iris_data (\n        id SERIAL PRIMARY KEY,\n        sepal_length float8,\n        sepal_width float8,\n        petal_length float8,\n        petal_width float8,\n        target int\n    );"""\n    print(create_table_query)\n    with db_connect.cursor() as cur:\n        cur.execute(create_table_query)\n        db_connect.commit()\n\n\ndef insert_data(db_connect, data):\n    insert_row_query = f"""\n    INSERT INTO iris_data\n        (sepal_length, sepal_width, petal_length, petal_width, target)\n        VALUES (\n            {data.sepal_length},\n            {data.sepal_width},\n            {data.petal_length},\n            {data.petal_width},\n            {data.target}\n        );\n    """\n    print(insert_row_query)\n    with db_connect.cursor() as cur:\n        cur.execute(insert_row_query)\n        db_connect.commit()\n\n\ndef generate_data(db_connect, df):\n    while True:\n        insert_data(db_connect, df.sample(1).squeeze())\n        time.sleep(5)\n\n\nif __name__ == "__main__":\n    parser = ArgumentParser()\n    parser.add_argument("--db-host", dest="db_host", type=str, default="localhost")\n    args = parser.parse_args()\n\n    db_connect = psycopg2.connect(\n        user="myuser",\n        password="mypassword",\n        host=args.db_host,\n        port=5432,\n        database="mydatabase",\n    )\n    create_table(db_connect)\n    df = get_data()\n    generate_data(db_connect, df)\n')),(0,r.kt)("p",null,"\uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uc21c\uc11c\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"DB \uc5d0 \uc5f0\uacb0\ud558\ub294 connector \uc0dd\uc131",(0,r.kt)("br",{parentName:"li"}),"\uc774 \ub54c connector \ub97c \uc0dd\uc131\ud560 \ub54c \uc704\uc5d0\uc11c \uc791\uc131\ud55c \ub0b4\uc6a9\uacfc \ub2e4\ub978\uc810\uc740 ",(0,r.kt)("inlineCode",{parentName:"li"},"host")," \ub97c \ubc1b\ub294 \ubd80\ubd84\uc744 ",(0,r.kt)("inlineCode",{parentName:"li"},"ArgumentParser")," \ub85c \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4.  ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},'parser = ArgumentParser()\nparser.add_argument("--db-host", dest="db_host", type=str, default="localhost")\nargs = parser.parse_args()\n')),"\uc774 \ub0b4\uc6a9\uacfc \uad00\ub828\ub41c \uc124\uba85\uc740 \uc774\ud6c4\uc5d0 \ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uc5f0\uacb0\ub41c DB \uc5d0 ",(0,r.kt)("inlineCode",{parentName:"li"},"iris_data")," \ud14c\uc774\ube14\uc744 \uc0dd\uc131"),(0,r.kt)("li",{parentName:"ol"},"iris \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc634"),(0,r.kt)("li",{parentName:"ol"},"\ubd88\ub7ec\uc628 \ub370\uc774\ud130 \uc911 \ud558\ub098\ub97c DB \uc5d0 \uc0bd\uc785")),(0,r.kt)("h3",{id:"12-dockerfile-\uc791\uc131"},"1.2 Dockerfile \uc791\uc131"),(0,r.kt)("h4",{id:"121-dockerfile"},"1.2.1 Dockerfile"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," \uc744 \uc774\uc6a9\ud558\uc5ec \uc704\uc5d0\uc11c \uc791\uc131\ud55c \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub294 \uc774\ubbf8\uc9c0\ub97c \ub9cc\ub4e4\uc5b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. "),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-docker",metastring:'title="Dockerfile"',title:'"Dockerfile"'},'FROM amd64/python:3.9-slim\n\nRUN apt-get update && apt-get install -y postgresql-client\n\nWORKDIR /usr/app\n\nRUN pip install -U pip &&\\\n    pip install scikit-learn pandas psycopg2-binary\n\nCOPY data_generator.py data_generator.py\n\nENTRYPOINT ["python", "data_generator.py", "--db-host"]\n# Change CMD to solve host finding error\nCMD ["localhost"]\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FROM")," : Image \ub97c \ub9cc\ub4e4 \ub54c base \uac00 \ub418\ub294 \uc774\ubbf8\uc9c0\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc11c\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"amd64/python:3.9-slim")," \uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"RUN")," : Image \ub97c \ub9cc\ub4e4 \ub54c \uc2e4\ud589\ud560 \ucf54\ub4dc\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. \uccab\ubc88\uc9f8 ",(0,r.kt)("inlineCode",{parentName:"li"},"RUN")," \uc5d0\uc11c\ub294 \ud574\ub2f9 Dockerfile \uc744 \uc774\uc6a9\ud558\uc5ec data generator server \ub97c \ub744\uc6b8 \ub54c, \ucee8\ud14c\uc774\ub108 \uc548\uc5d0 \uc811\uadfc\ud558\uc5ec ",(0,r.kt)("inlineCode",{parentName:"li"},"psql"),"\uc744 \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 ",(0,r.kt)("inlineCode",{parentName:"li"},"postgresql-client")," \uc744 \uc124\uce58\ud569\ub2c8\ub2e4. \ub450\ubc88\uc9f8 ",(0,r.kt)("inlineCode",{parentName:"li"},"RUN")," \uc5d0\uc11c\ub294 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c python \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud560 \ub54c \ud544\uc694\ud55c ",(0,r.kt)("inlineCode",{parentName:"li"},"scikit-learn"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"pandas"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"psycopg2-binary"),"\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"WORKDIR")," : \uc791\uc5c5 directory \ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ud574\ub2f9 directory \uac00 \uc5c6\uc73c\uba74 \uc0c8\ub85c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc791\uc5c5 directory \ub97c \uc9c0\uc815\ud558\uba74 \uadf8 \uc774\ud6c4 \uba85\ub839\uc5b4\ub294 \ud574\ub2f9 directory \ub97c \uae30\uc900\uc73c\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"COPY")," : \ud30c\uc77c\uc774\ub098 \ud3f4\ub354\ub97c \uc774\ubbf8\uc9c0\uc5d0 \ubcf5\uc0ac\ud569\ub2c8\ub2e4. \uc0c1\ub300 \uacbd\ub85c\ub97c \uc0ac\uc6a9\ud560 \uacbd\uc6b0, ",(0,r.kt)("inlineCode",{parentName:"li"},"WORKDIR"),"\ub85c \uc9c0\uc815\ud55c directory \ub97c \uae30\uc900\uc73c\ub85c \ubcf5\uc0ac\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc11c\ub294 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc2e4\ud589\uc2dc\ud0a4\uae30 \uc704\ud574 \uc55e\uc11c \uc791\uc131\ud55c ",(0,r.kt)("inlineCode",{parentName:"li"},"data_generator.py"),"\ub97c \ubcf5\uc0ac\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ENTRYPOINT")," : \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub420 \ub54c \uc2dc\uc791\ud560 \ud504\ub85c\uc138\uc2a4\ub97c \uc785\ub825\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"CMD")," : \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub420 \ub54c ",(0,r.kt)("inlineCode",{parentName:"li"},"ENTRYPOINT")," \uc5d0 \uc804\ub2ec\ud560 argument\ub97c \uc785\ub825\ud569\ub2c8\ub2e4."))),(0,r.kt)("h4",{id:"122-build"},"1.2.2 Build"),(0,r.kt)("p",null,"\uc774\uc81c \uc704\uc5d0\uc11c \uc791\uc131\ud55c ",(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," \uc744 \uc774\uc6a9\ud574 \uc774\ubbf8\uc9c0\ub97c build \ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc774\ubbf8\uc9c0\ub97c build \ud558\uae30 \uc704\ud574\uc11c\ub294 \uc544\ub798 \uaddc\uce59\uc744 \ub530\ub974\uba74 \ub429\ub2c8\ub2e4. \uad00\ub828\ud574 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/commandline/build/"},"\uacf5\uc2dd \ud648\ud398\uc774\uc9c0"),"\ub97c \ucc38\uace0\ud574\uc8fc\uc138\uc694."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker build [OPTIONS] PATH | URL | -\n")),(0,r.kt)("p",null,"\uc774\ubbf8\uc9c0 \uc774\ub984\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \ub85c \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker build . -t data-generator\n")),(0,r.kt)("p",null,"\uc774\ubbf8\uc9c0\uac00 \uc0dd\uc131\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker image ls\n")),(0,r.kt)("p",null,"\uc704 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uba74 \uc544\ub798\uc640 \uac19\uc774 ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \uac00 \uc788\uc74c\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker image ls\nREPOSITORY                  TAG       IMAGE ID       CREATED         SIZE\ndata-generator         latest    96d8fa213c74   5 hours ago     635MB\n")),(0,r.kt)("h4",{id:"123-run"},"1.2.3 Run"),(0,r.kt)("p",null,"\uc774\uc81c build \ud55c \uc774\ubbf8\uc9c0\ub97c \uc2e4\ud589\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker run data-generator\n")),(0,r.kt)("p",null,"\uc2e4\ud589\ud560 \uacbd\uc6b0 \uc544\ub798\uc640 \uac19\uc774 \uc5d0\ub7ec \uba54\uc138\uc9c0\uc640 \ud568\uaed8 \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub429\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\ndocker run data-generator\nTraceback (most recent call last):\n  File "/usr/app/create_table.py", line 26, in <module>\n    db_connect = psycopg2.connect(\n  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at "localhost" (127.0.0.1), port 5432 failed: Connection refused\n        Is the server running on that host and accepting TCP/IP connections?\nconnection to server at "localhost" (::1), port 5432 failed: Cannot assign requested address\n        Is the server running on that host and accepting TCP/IP connections?\n')),(0,r.kt)("p",null,"\ud574\ub2f9 \uc5d0\ub7ec\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:5432")," \uac00 \uc751\ub2f5\ud558\uc9c0 \uc54a\uace0 \uc788\ub2e4\ub294 \uc5d0\ub7ec\uc785\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ud574\ub2f9 \uba54\uc138\uc9c0\ub97c \uc77d\uace0 \ub098\uba74 \uc81c\uc77c \ucc98\uc74c \ud655\uc778\ud574 \ubcfc \ubd80\ubd84\uc740 DB \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub418\uc9c0 \uc54a\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker ps\n")),(0,r.kt)("p",null,"\uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud574\ubcf4\uba74 \ud604\uc7ac DB \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\uc911\uc784\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\ndocker ps\nCONTAINER ID   IMAGE           COMMAND                  CREATED         STATUS         PORTS                    NAMES\n26eeee50afc6   postgres:14.0   "docker-entrypoint.s\u2026"   3 seconds ago   Up 2 seconds   0.0.0.0:5432->5432/tcp   postres-server\n')),(0,r.kt)("p",null,"\ub85c\uceec \ud30c\uc774\uc36c \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\uc2dc\ud0a4\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \uc2e4\ud589\uc774\ub429\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub7fc \uc65c ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \ub97c \uc2e4\ud589\uc2dc\ud0a4\ub294 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c\ub294 \uc811\uadfc\ud560 \uc218 \uc5c6\ub2e4\uace0 \ub098\uc62c\uae4c\uc694? \uc774\ub97c \uc704\ud574\uc11c\ub294 Docker \uc758 \ub124\ud2b8\uc6cc\ud06c\uc5d0 \ub300\ud574\uc11c \uc774\ud574\ud560 \ud544\uc694\uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("h2",{id:"2-docker-network"},"2. Docker Network"),(0,r.kt)("h3",{id:"21-localhost"},"2.1 Localhost"),(0,r.kt)("p",null,"\ub85c\uceec\uc5d0\uc11c\ub294 \uc5b4\ub5bb\uac8c DB \ucee8\ud14c\uc774\ub108\uc5d0 \uc811\uadfc\uc774 \uac00\ub2a5\ud588\uc744\uae4c\uc694?"),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Localhost Networking",src:n(8342).Z,width:"354",height:"526"}),(0,r.kt)("br",{parentName:"p"}),"\n","[\uadf8\ub9bc 1-2]"," Localhost Networking")),(0,r.kt)("p",null,"[\uadf8\ub9bc 1-2]"," \ub294 \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b4 \ub370\uc2a4\ud06c\ud0d1\uacfc \ucee8\ud14c\uc774\ub108\uc758 \uad00\uacc4\uc785\ub2c8\ub2e4.  ",(0,r.kt)(i.Z,{color:"#6A77D7",mdxType:"Highlight"},"1) DB Server Creation ")," \ucc55\ud130\uc5d0\uc11c DB \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b8 \ub54c \uc0ac\uc6a9\ud55c \uba85\ub839\uc5b4\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker run -d \\\n    ...\n  -p 5432:5432 \\\n  postgres:14.0\n")),(0,r.kt)("p",null,"\uc774 \ub54c ",(0,r.kt)("inlineCode",{parentName:"p"},"-p")," \uc635\uc158\uc740 \ud3ec\ud2b8 \ud3ec\uc6cc\ub529\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \uc704\uc758 5432:5432 \ub97c \ud574\uc11d\ud558\uba74 DB container \uc758 5432 \ud3ec\ud2b8\ub97c localhost \uc758 5432 \ud3ec\ud2b8\ub85c \uc5f0\uacb0\ud558\ub77c\ub294 \ub73b\uc785\ub2c8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc989, ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:5432")," \uc5d0 \ub300\ud55c \uc811\uadfc\uc740 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc758 5432 \ud3ec\ud2b8\uc5d0 \ub300\ud55c \uc811\uadfc\uacfc \uac19\uc2b5\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uc5f0\uacb0\uc774 \uc788\uc5c8\uae30 \ub54c\ubb38\uc5d0 \ub85c\uceec\uc5d0\uc11c\ub294 DB\uc5d0 \uc811\uadfc\uc774 \uac00\ub2a5\ud588\uc2b5\ub2c8\ub2e4."),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Container Networking Disconneted",src:n(5648).Z,width:"698",height:"526"}),(0,r.kt)("br",{parentName:"p"}),"\n","[\uadf8\ub9bc 1-3]"," Container Networking Disconneted")),(0,r.kt)("p",null,"[\uadf8\ub9bc 1-3]"," \ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \uc758 \ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589\uc2dc\ucf30\uc744 \ub54c\uc758 \ub3c4\uc2dd\uc785\ub2c8\ub2e4.\n\uc774 \ub54c ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \ucee8\ud14c\uc774\ub108 \uc785\uc7a5\uc5d0\uc11c ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:5432")," \ub294 \uc544\ubb34 \uac83\ub3c4 \uc5f4\ub824\uc788\uc9c0 \uc54a\ub294 \ube44\uc5b4\uc788\ub294 \ud3ec\ud2b8\uc785\ub2c8\ub2e4.\n\uadf8\ub807\uae30 \ub54c\ubb38\uc5d0 DB \ub97c \ucc3e\uc9c0 \ubabb\ud55c\ub2e4\ub294 \uc5d0\ub7ec\uc640 \ud568\uaed8 \uc885\ub8cc\uac00 \ub429\ub2c8\ub2e4."),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Container Networking Connetected",src:n(5746).Z,width:"698",height:"526"}),(0,r.kt)("br",{parentName:"p"}),"\n","[\uadf8\ub9bc 1-4]"," Container Networking Connetected")),(0,r.kt)("p",null,"\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574\uc11c\ub294 ","[\uadf8\ub9bc 1-4]"," \ucc98\ub7fc \ub450 \ucee8\ud14c\uc774\ub108 \uac04\uc5d0 \ud1b5\uc2e0\ud560 \uc218 \uc788\ub3c4\ub85d \uc5f0\uacb0\ud574 \uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"22-connect-network"},"2.2 Connect Network"),(0,r.kt)("p",null,"\ub450 \ucee8\ud14c\uc774\ub108\ub97c \uc5f0\uacb0\uc2dc\ud0a4\ub294 \ubc29\ubc95 \uc911 \ud558\ub098\ub85c docker network \ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc6b0\uc120, \ucee8\ud14c\uc774\ub108\uac04 \ud1b5\uc2e0\ud560 \uc218 \uc788\ub294 \ub124\ud2b8\uc6cc\ud06c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker network create my-network\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc2e4\ud589 \uc911\uc778 DB \ucee8\ud14c\uc774\ub108\ub97c \uc0dd\uc131\ud55c \ub3c4\ucee4 \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc5f0\uacb0\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\ndocker network connect my-network postgres-server\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc774\uc81c \ub2e4\uc2dc ",(0,r.kt)("inlineCode",{parentName:"p"},"data-generator")," \ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."),(0,r.kt)(l.Z,{mdxType:"CodeDescription"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\ndocker run --name data-generator --network "my-network" data-generator "postgres-server"\n')),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--network")," \uc635\uc158\uc5d0 \uc704\uc5d0\uc11c \uc0dd\uc131\ud55c \ub124\ud2b8\uc6cc\ud06c \uc774\ub984\uc744 \uc785\ub825\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\ucee8\ud14c\uc774\ub108\ub97c \uc2dc\uc791\ud560 \ub54c \uc774\ubbf8\uc9c0 \uc774\ub984\uc758 \ub4a4\uc5d0 \uc785\ub825\ub41c \uac12\uc740 Dockerfile \uc758 ",(0,r.kt)("inlineCode",{parentName:"li"},"ENTRYPOINT")," \ub97c \uc218\uc815\ud569\ub2c8\ub2e4.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc704\uc5d0\uc11c connector \ub97c \uc0dd\uc131\ud560 \ub54c host \ub97c \ubc1b\ub294 \ubd80\ubd84\uc744 \uc218\uc815 \ud588\uc5c8\ub294\ub370 \ubc14\ub85c \uc774 \uacbd\uc6b0\ub97c \uc704\ud574\uc11c \uc785\ub2c8\ub2e4.\n\uc774\uc81c \ucee8\ud14c\uc774\ub108\uac04\uc758 \ud1b5\uc2e0\uc740 ",(0,r.kt)("inlineCode",{parentName:"li"},"localhost")," \uac00 \uc544\ub2cc \uac01 \ucee8\ud14c\uc774\ub108\uc758 \uc774\ub984\uc774 host \uac00 \ub429\ub2c8\ub2e4.\n\uc774\ub54c \uc55e\uc11c \ub744\uc6b4 DB \ucee8\ud14c\uc774\ub108\uc758 \uc774\ub984\uc740 ",(0,r.kt)("inlineCode",{parentName:"li"},"postgres-server")," \uc774\uae30 \ub54c\ubb38\uc5d0 argument \ub85c ",(0,r.kt)("inlineCode",{parentName:"li"},"postgres-server")," \ub97c \uc785\ub825\ud569\ub2c8\ub2e4."))))))),(0,r.kt)("h3",{id:"23-data-\ud655\uc778"},"2.3 Data \ud655\uc778"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"psql")," \uc744 \uc774\uc6a9\ud558\uc5ec DB \uc5d0 \uc811\uadfc\ud558\uace0, \uacc4\uc18d\ud574\uc11c \ub370\uc774\ud130\uac00 \uc0bd\uc785\ub418\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"psql \uc5d0 \uc811\uc18d\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# terminal-command\npsql -h localhost -p 5432 -U myuser -d mydatabase\nPassword for user myuser: \npsql (14.3, server 14.0 (Debian 14.0-1.pgdg110+1))\nType "help" for help.\n\nmydatabase=#\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)(i.Z,{color:"#6A77D7",mdxType:"Highlight"},"3) Data Insertion ")," \ucc55\ud130\uc5d0\uc11c \uc791\uc131\ud55c `iris_data` \ud14c\uc774\ube14\uc5d0 \uc788\ub294 \ub370\uc774\ud130 \uc804\uccb4\ub97c \ud655\uc778\ud558\uae30 \uc704\ud55c query \ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# terminal-command\nmydatabase=# select * from iris_data;\n id | sepal_length | sepal_width | petal_length | petal_width | target \n----+--------------+-------------+--------------+-------------+--------\n  1 |          5.6 |           3 |          4.5 |         1.5 |      1\n  2 |          5.9 |           3 |          5.1 |         1.8 |      2\n  3 |          5.5 |         2.4 |          3.8 |         1.1 |      1\n  4 |          5.4 |         3.9 |          1.3 |         0.4 |      0\n(4 rows)\n")),(0,r.kt)("p",{parentName:"li"},"\uc2e4\ud589\uc744 \ud560 \ub54c\ub9c8\ub2e4 \uacc4\uc18d\ud574\uc11c \ub370\uc774\ud130\uac00 \ucd94\uac00\ub418\uace0 \uc788\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."))),(0,r.kt)("h2",{id:"3-\ud55c\uacc4"},"3. \ud55c\uacc4"),(0,r.kt)("p",null,"\ub2e4\ub9cc \uc774 \ubc29\ubc95\uc740 \uc5ec\ub7ec \ubd88\ud3b8\ud568\uc774 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc6b0\uc120 \ud1b5\uc2e0\uc744 \uc704\ud574\uc11c\ub294 \ucee8\ud14c\uc774\ub108\uc758 \uc774\ub984\uc744 \uc54c\uc544\uc57c \ud569\ub2c8\ub2e4.\n\uadf8\ub9ac\uace0 \uc11c\ub85c \uc5f0\uacb0\uc774 \ud544\uc694\ud55c \ucee8\ud14c\uc774\ub108\uc5d0\uac8c \ub2e4\ub978 \ucee8\ud14c\uc774\ub108\uc758 \uc774\ub984\uc744 \uc804\ub2ec\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\n\uc774\ub984\uc744 \uc9c0\uc815\ud574 \uc5b4\ub290\uc815\ub3c4 \ud574\uc18c\ud560 \uc218 \uc788\uc73c\ub098 \ucee8\ud14c\uc774\ub108\uac00 \uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc774\uc720\ub85c \uc885\ub8cc\ub420 \uacbd\uc6b0 \uc0ac\uc6a9\ub41c \uc774\ub984\uc744 \uc810\uc720\ud558\uace0 \uc788\uc5b4\uc11c \ub2e4\uc2dc \uc2e4\ud589\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc885\ub8cc\ub41c \ucee8\ud14c\uc774\ub108\ub97c \uc9c0\uc6cc\uc57c \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ub610\ud55c \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub418\ub294 \uc21c\uc11c\ub97c \ubcf4\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4\uc11c DB\uac00 \uc2e4\ud589\ub418\uae30 \uc804\uc5d0 \ub370\uc774\ud130\ub97c \uc0bd\uc785\uc744 \uc2dc\ub3c4\ud558\uba74 \ud574\ub2f9 \ucee8\ud14c\uc774\ub108\ub294 \uc624\ub958\uc640 \ud568\uaed8 \uc2e4\ud589\uc774 \uc885\ub8cc\ub429\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc774\ucc98\ub7fc \uc5ec\ub7ec \ucee8\ud14c\uc774\ub108\uac04\uc758 \ubb38\uc81c\ub97c \uc870\uc728 \ud558\ub294 \uac83\uc744 Container Orchestration \uc774\ub77c\uace0 \ud558\uba70 \ub3c4\ucee4\uc5d0\uc11c\ub294 \uc790\uccb4\uc801\uc778 \ud574\uacb0\ubc95\uc73c\ub85c ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/"},"Docker Compose")," \ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4."))}u.isMDXComponent=!0},8342:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/db-2-b4533a6d5e1a0c734edfc887812e933d.png"},5648:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/db-3-6f4cc771d428dcbc32b22c48b0e624de.png"},5746:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/db-4-3b258c53b1104a6912a01b168098f464.png"}}]);